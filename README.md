Destructive Farm
================

Ферма для attack-defense CTF-соревнований

<p align="center">
    <img src="https://github.com/borzunov/DestructiveFarm/blob/master/docs/images/farm_server_screenshot.png" width="700">
</p>

Ознакомьтесь с [FAQ](docs/faq.md), если вы хотите узнать о том, что такое attack-defense CTF, какие возможности предоставляет эта ферма и почему она имеет архитектуру, описанную ниже.

## Компоненты фермы

1. **Эксплоит** &mdash; это скрипт, который позволяет красть флаги в определённом сервисе у команд-противников. Пишется участником во время соревнования. Должен принимать хост (IP или домен) команды-соперника в качестве первого аргумента командной строки (`sys.argv[1]`), атаковать команду и выводить флаги в stdout.

    [Пример эксплоита](client/spl_example_runme.py) | [Подробнее о формате эксплоита](docs/exploit_format.md)

2. **Клиент фермы** &mdash; это утилита, которая регулярно запускает эксплоит, чтобы атаковать чужие команды, и следит за его работой. Запускается участником на своём ноутбуке после написания эксплоита.

    Клиент представляет собой однофайловый скрипт [start_sploit.py](client/start_sploit.py) из данного репозитория.

    [Подробнее о клиенте](docs/farm_client.md)

3. **Сервер фермы** &mdash; это утилита, которая собирает флаги от клиентов фермы, следит за использованием квот, централизованно отправляет флаги в проверяющую систему и показывает статистику по принятым и некорректным флагам. Настраивается и запускается админом команды в начале соревнования. Во время соревнования члены команды могут воспользоваться веб-интерфейсом сервера (см. скриншот выше), чтобы следить за результатами работы эксплоитов и статистикой отправляемых флагов.

    Сервер представляет собой веб-сервис (на Flask) из папки [server](server) в данном репозитории.

    [Подробнее о сервере](docs/farm_server.md)

<p align="center">
    <img src="https://github.com/borzunov/DestructiveFarm/blob/master/docs/images/diagram.png" width="500"><br><br>
    <i>Стрелки на диаграмме указывают направление движения флагов</i>
</p>

## Планы на будущее

См. список по [ссылке](https://github.com/borzunov/DestructiveFarm/issues/1).

## Другие фермы

- [Ферма](https://github.com/alexbers/exploit_farm) Бэя &mdash; более простая ферма, архитектура и некоторые детали реализации которой были заимствованы в этом репозитории. В ферме Бэя используется такой же формат эксплоита и тоже есть деление на клиент (*start_sploit.py*) и сервер (*start_posting.py*). Однако, у Бэя они должны быть запущены на одном компьютере (в [FAQ](docs/faq.md) объясняется, почему это неудобно), а сервер не предоставляет веб-интерфейс для просмотра статистики (и ряд других функций).

- [Ферма](https://github.com/andgein/ctf-exploit-farm) Андрея Гейна &mdash; ферма, решающая проблему с большим количеством процессов при большом количестве команд с помощью асинхронного сетевого взаимодействия (asyncio).

## Авторы

Copyright &copy; 2017, 2018 Александр Борзунов (команда &laquo;Destructive Voice&raquo;)

Архитектура и некоторые детали реализации заимствованы из [фермы](https://github.com/alexbers/exploit_farm) Бэя (Александра Берсенева).
